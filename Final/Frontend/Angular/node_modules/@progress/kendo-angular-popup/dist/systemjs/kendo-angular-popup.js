/**-----------------------------------------------------------------------------------------
* Copyright Â© 2020 Progress Software Corporation. All rights reserved.
* Licensed under commercial license. See LICENSE.md in the project root for more information
*-------------------------------------------------------------------------------------------*/
System.register("@progress/kendo-angular-popup",["tslib","@angular/core","@angular/common","@progress/kendo-angular-common","rxjs","@progress/kendo-licensing","@progress/kendo-popup-common","rxjs/operators","@angular/animations"],function(r){var s,a,p,c,l,u,f,d,h;function e(t){return t.__useDefault?t.default:t}return{setters:[function(t){s=e(t)},function(t){a=e(t)},function(t){p=e(t)},function(t){c=e(t)},function(t){l=e(t)},function(t){u=e(t)},function(t){f=e(t)},function(t){d=e(t)},function(t){h=e(t)}],execute:function(){function o(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}var n,i;i={},o.m=n=[function(t,e){t.exports=a},function(t,e){t.exports=s},function(t,e){t.exports=c},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e(9),r=e(2);i.eitherRect=function(t,e){return t||{height:0,left:e.left,top:e.top,width:0}},i.replaceOffset=function(t,e){return e?{height:t.height,left:e.left,top:e.top,width:t.width}:t},i.removeStackingOffset=function(t,e){return e?{height:t.height,left:t.left-e.left,top:t.top-e.top,width:t.width}:t},i.isDifferentOffset=function(t,e){var n=t.left,o=t.top,t=e.left,e=e.top;return 1<=Math.abs(n-t)||1<=Math.abs(o-e)},i.isWindowAvailable=function(){return"undefined"!=typeof window},i.hasBoundingRect=function(t){return!!t.getBoundingClientRect},i.OVERFLOW_REGEXP=/auto|scroll/;var o,s;i.scrollableParents=function(t){var e=[];if(!r.isDocumentAvailable()||!i.isWindowAvailable())return e;for(var n,o=t.parentElement;o;)(i.OVERFLOW_REGEXP.test(""+(n=o).style.overflow+n.style.overflowX+n.style.overflowY||""+(n=window.getComputedStyle(n)).overflow+n.overflowX+n.overflowY)||o.hasAttribute("data-scrollable"))&&e.push(o),o=o.parentElement;return e.push(window),e},i.FRAME_DURATION=1e3/60,i.hasRelativeStackingContext=(s=!1,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s||(o=function(){if(!r.isDocumentAvailable()&&null!==document.body)return!1;var t=document.createElement("div");t.style.transform="matrix(10, 0, 0, 10, 0, 0)",t.innerHTML='<div style="position: fixed; top: 10px;">child</div>',document.body.appendChild(t);var e=10!==t.children[0].getBoundingClientRect().top;return document.body.removeChild(t),e}.apply(void 0,t),s=!0),o}),i.zIndex=function(t,e){if(!t||!r.isDocumentAvailable()||!i.isWindowAvailable())return null;e=n.siblingContainer(t,e);if(!e)return null;e=[t].concat(n.parents(t,e)).reduce(function(t,e){e=e.style.zIndex||window.getComputedStyle(e).zIndex,e=parseInt(e,10);return t<e?e:t},0);return e?e+1:null},i.scaleRect=function(t,e){return t&&1!==e?{height:t.height/e,left:t.left/e,top:t.top/e,width:t.width/e}:t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(9),s=n(3),a=n(2),p=["font-size","font-family","font-stretch","font-style","font-weight","line-height"],i=(c.prototype.addOffset=function(t,e){return{left:t.left+e.left,top:t.top+e.top}},c.prototype.addScroll=function(t,e){return r.addScroll(t,e)},c.prototype.align=function(t){return r.align(t)},c.prototype.boundingOffset=function(t){return r.boundingOffset(this.nativeElement(t))},c.prototype.getFontStyles=function(t){var e=this.getWindow();if(!e||!t)return[];var n=e.getComputedStyle(this.nativeElement(t));return p.map(function(t){return{key:t,value:n[t]}})},c.prototype.getWindow=function(){return s.isWindowAvailable()?window:null},c.prototype.hasOffsetParent=function(t){return!!t&&!!this.nativeElement(t).offsetParent},c.prototype.offset=function(t){return t?r.offset(this.nativeElement(t)):null},c.prototype.offsetAtPoint=function(t,e){if(!t)return null;var n=this.nativeElement(t),o=n.style,i=o.left,t=o.top,o=o.transition;n.style.transition="none",n.style.left=e.left+"px",n.style.top=e.top+"px";e=r.offset(n);return n.style.left=i,n.style.top=t,n.offsetHeight,n.style.transition=o,e},c.prototype.nativeElement=function(t){return t?t.nativeElement||t:null},c.prototype.position=function(t,e,n){return void 0===n&&(n=1),t&&e?r.positionWithScroll(this.nativeElement(t),this.nativeElement(e),n):null},c.prototype.removeScroll=function(t,e){return r.removeScroll(t,e)},c.prototype.restrictToView=function(t){return r.restrictToView(t)},c.prototype.scrollPosition=function(t){return r.scrollPosition(this.nativeElement(t))},c.prototype.scrollableParents=function(t){return s.scrollableParents(this.nativeElement(t))},c.prototype.stackingElementOffset=function(t){t=this.getRelativeContextElement(t);return t?r.offset(t):null},c.prototype.stackingElementScroll=function(t){t=this.getRelativeContextElement(t);return t?{x:t.scrollLeft,y:t.scrollTop}:{x:0,y:0}},c.prototype.getRelativeContextElement=function(t){if(!t||!s.hasRelativeStackingContext())return null;for(var e=this.nativeElement(t).parentElement;e;){if("none"!==window.getComputedStyle(e).transform)return e;e=e.parentElement}return null},c.prototype.useRelativePosition=function(t){return!!this.getRelativeContextElement(t)},c.prototype.windowViewPort=function(t){return r.getWindowViewPort(this.nativeElement(t))},c.prototype.zIndex=function(t,e){return s.zIndex(this.nativeElement(t),this.nativeElement(e))},c.prototype.zoomLevel=function(){return a.isDocumentAvailable()&&s.isWindowAvailable()&&parseFloat((document.documentElement.clientWidth/window.innerWidth).toFixed(2))||1},c.prototype.isZoomed=function(){return 1<this.zoomLevel()},o.__decorate([i.Injectable()],c));function c(){}e.DOMService=i},function(t,e){t.exports=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n=n(0);e.SCALE=new n.InjectionToken("Popup Document Scale")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),c=n(0),i=n(20),r=n(4),s=n(19),a=n(18),p=n(17),l=n(16),u=n(3),f=n(2),d=n(5),h=n(14),m=n(13),v={left:-1e4,top:0},l=(y.prototype.ngOnInit=function(){this.reposition=this.reposition.bind(this),this._resizeService.subscribe(this.reposition),this.animationSubscriptions=this.animationService.start.subscribe(this.onAnimationStart.bind(this)),this.animationSubscriptions.add(this.animationService.end.subscribe(this.onAnimationEnd.bind(this))),this._scrollableService.forElement(this.anchor||this.container).subscribe(this.onScroll.bind(this)),this.currentOffset=v,this.setZIndex(),this.copyFontStyles(),this.updateFixedClass()},y.prototype.ngOnChanges=function(t){t.copyAnchorStyles&&this.copyFontStyles(),t.positionMode&&this.updateFixedClass()},y.prototype.ngAfterViewInit=function(){var t=this;this.reposition(),this.animate||this.resolvedPromise.then(function(){t.onAnimationEnd()})},y.prototype.ngAfterViewChecked=function(){var t=this;this.initialCheck?this.initialCheck=!1:this._zone.runOutsideAngular(function(){t.unsubscribeReposition(),t.repositionSubscription=d.from(t.resolvedPromise).subscribe(t.reposition)})},y.prototype.ngOnDestroy=function(){this.anchorViewportLeave.complete(),this.positionChange.complete(),this.close.emit(),this.close.complete(),this._resizeService.unsubscribe(),this._scrollableService.unsubscribe(),this.animationSubscriptions.unsubscribe(),this.unsubscribeReposition()},y.prototype.onResize=function(){this.reposition()},y.prototype.onAnimationStart=function(){this._renderer.removeClass(this.container.nativeElement,"k-animation-container-shown")},y.prototype.onAnimationEnd=function(){this._renderer.addClass(this.container.nativeElement,"k-animation-container-shown"),this.open.emit(),this.open.complete()},Object.defineProperty(y.prototype,"currentOffset",{get:function(){return this._currentOffset},set:function(t){this.setContainerStyle("left",t.left+"px"),this.setContainerStyle("top",t.top+"px"),this._currentOffset=t},enumerable:!0,configurable:!0}),y.prototype.setZIndex=function(){this.anchor&&this.setContainerStyle("z-index",String(this.domService.zIndex(this.anchor,this.container)))},y.prototype.reposition=function(){var t,e,n,o=this;f.isDocumentAvailable()&&(t=this.position(),e=t.flip,n=t.offset,this.currentOffset&&!u.isDifferentOffset(this.currentOffset,n)||(this.currentOffset=n,f.hasObservers(this.positionChange)&&this._zone.run(function(){return o.positionChange.emit({offset:n,flip:e})})),this.animate&&this.animationService.play(this.contentContainer.nativeElement,this.animate,e),this.resizeSensor.acceptSize())},y.prototype.position=function(){var t=this._alignService.alignElement({anchor:this.anchor,anchorAlign:this.anchorAlign,element:this.container,elementAlign:this.popupAlign,margin:this.margin,offset:this.offset,positionMode:this.positionMode});return this._positionService.positionElement({anchor:this.anchor,anchorAlign:this.anchorAlign,collisions:this.collision,currentLocation:t,element:this.container,elementAlign:this.popupAlign,margin:this.margin})},y.prototype.onScroll=function(t){var e=this,n=f.hasObservers(this.anchorViewportLeave);t||!n?this.reposition():n&&this._zone.run(function(){e.anchorViewportLeave.emit()})},y.prototype.copyFontStyles=function(){var e=this;this.anchor&&this.copyAnchorStyles&&this.domService.getFontStyles(this.anchor).forEach(function(t){return e.setContainerStyle(t.key,t.value)})},y.prototype.updateFixedClass=function(){var t="fixed"===this.positionMode?"addClass":"removeClass";this._renderer[t](this.container.nativeElement,"k-animation-container-fixed")},y.prototype.setContainerStyle=function(t,e){this._renderer.setStyle(this.container.nativeElement,t,e)},y.prototype.unsubscribeReposition=function(){this.repositionSubscription&&this.repositionSubscription.unsubscribe()},o.__decorate([c.Input(),o.__metadata("design:type",Object)],y.prototype,"animate",void 0),o.__decorate([c.Input(),o.__metadata("design:type",c.ElementRef)],y.prototype,"anchor",void 0),o.__decorate([c.Input(),o.__metadata("design:type",Object)],y.prototype,"anchorAlign",void 0),o.__decorate([c.Input(),o.__metadata("design:type",Object)],y.prototype,"collision",void 0),o.__decorate([c.Input(),o.__metadata("design:type",Object)],y.prototype,"popupAlign",void 0),o.__decorate([c.Input(),o.__metadata("design:type",Boolean)],y.prototype,"copyAnchorStyles",void 0),o.__decorate([c.Input(),o.__metadata("design:type",Object)],y.prototype,"popupClass",void 0),o.__decorate([c.Input(),o.__metadata("design:type",String)],y.prototype,"positionMode",void 0),o.__decorate([c.Input(),o.__metadata("design:type",Object)],y.prototype,"offset",void 0),o.__decorate([c.Input(),o.__metadata("design:type",Object)],y.prototype,"margin",void 0),o.__decorate([c.Output(),o.__metadata("design:type",c.EventEmitter)],y.prototype,"anchorViewportLeave",void 0),o.__decorate([c.Output(),o.__metadata("design:type",c.EventEmitter)],y.prototype,"close",void 0),o.__decorate([c.Output(),o.__metadata("design:type",c.EventEmitter)],y.prototype,"open",void 0),o.__decorate([c.Output(),o.__metadata("design:type",c.EventEmitter)],y.prototype,"positionChange",void 0),o.__decorate([c.ViewChild("container",{static:!0}),o.__metadata("design:type",c.ElementRef)],y.prototype,"contentContainer",void 0),o.__decorate([c.ViewChild(f.ResizeSensorComponent,{static:!0}),o.__metadata("design:type",f.ResizeSensorComponent)],y.prototype,"resizeSensor",void 0),o.__decorate([c.Component({exportAs:"kendo-popup",providers:[i.AlignService,l.AnimationService,r.DOMService,s.PositionService,a.ResizeService,p.ScrollableService],selector:"kendo-popup",template:'\n        <div class="k-popup" [ngClass]="popupClass" #container>\n            <ng-content></ng-content>\n            <ng-template [ngTemplateOutlet]="content" [ngIf]="content"></ng-template>\n            <kendo-resize-sensor [rateLimit]="100" (resize)="onResize()">\n            </kendo-resize-sensor>\n        </div>\n     '}),o.__metadata("design:paramtypes",[c.ElementRef,i.AlignService,r.DOMService,s.PositionService,a.ResizeService,p.ScrollableService,l.AnimationService,c.Renderer2,c.NgZone])],y));function y(t,e,n,o,i,r,s,a,p){this.container=t,this._alignService=e,this.domService=n,this._positionService=o,this._resizeService=i,this._scrollableService=r,this.animationService=s,this._renderer=a,this._zone=p,this.animate=!0,this.anchorAlign={horizontal:"left",vertical:"bottom"},this.collision={horizontal:"fit",vertical:"flip"},this.popupAlign={horizontal:"left",vertical:"top"},this.copyAnchorStyles=!1,this.positionMode="fixed",this.offset=v,this.anchorViewportLeave=new c.EventEmitter,this.close=new c.EventEmitter,this.open=new c.EventEmitter,this.positionChange=new c.EventEmitter,this.resolvedPromise=Promise.resolve(null),this.initialCheck=!0,h.validatePackage(m.packageMetadata),this._renderer.addClass(t.nativeElement,"k-animation-container"),this.updateFixedClass()}e.PopupComponent=l},function(t,e){t.exports=d},function(t,e){t.exports=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(7);e.POPUP_CONTAINER=new i.InjectionToken("Popup Container");Object.defineProperty(s.prototype,"rootViewContainer",{get:function(){var t=this.applicationRef.components||[];if(t[0])return t[0];throw new Error("\n            View Container not found! Inject the POPUP_CONTAINER or define a specific ViewContainerRef via the appendTo option.\n            See http://www.telerik.com/kendo-angular-ui/components/popup/api/POPUP_CONTAINER/ for more details.\n        ")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rootViewContainerNode",{get:function(){return this.container?this.container.nativeElement:this.getComponentRootNode(this.rootViewContainer)},enumerable:!0,configurable:!0}),s.prototype.open=function(t){void 0===t&&(t={});var e=this.contentFrom(t.content),n=e.component,e=e.nodes,o=this.appendPopup(e,t.appendTo),e=o.instance;this.projectComponentInputs(o,t),o.changeDetectorRef.detectChanges(),n&&n.changeDetectorRef.detectChanges();var i=this.getComponentRootNode(o);return{close:function(){n&&n.destroy(),o.destroy(),i&&i.parentNode&&i.parentNode.removeChild(i)},content:n,popup:o,popupAnchorViewportLeave:e.anchorViewportLeave,popupClose:e.close,popupElement:i,popupOpen:e.open,popupPositionChange:e.positionChange}},s.prototype.appendPopup=function(t,e){t=this.createComponent(r.PopupComponent,t,e);return e||this.rootViewContainerNode.appendChild(this.getComponentRootNode(t)),t},s.prototype.getComponentRootNode=function(t){return t.location.nativeElement},s.prototype.getComponentFactory=function(t){return this.componentFactoryResolver.resolveComponentFactory(t)},s.prototype.createComponent=function(t,e,n){t=this.getComponentFactory(t);if(n)return n.createComponent(t,void 0,this.injector,e);e=t.create(this.injector,e);return this.applicationRef.attachView(e.hostView),e},s.prototype.projectComponentInputs=function(e,n){return Object.getOwnPropertyNames(n).filter(function(t){return"content"!==t||n.content instanceof i.TemplateRef}).map(function(t){e.instance[t]=n[t]}),e},s.prototype.contentFrom=function(t){if(!t||t instanceof i.TemplateRef)return{component:null,nodes:[[]]};t=this.createComponent(t);return{component:t,nodes:[t?[t.location.nativeElement]:[]]}},o=o.__decorate([i.Injectable(),o.__param(3,i.Inject(e.POPUP_CONTAINER)),o.__param(3,i.Optional()),o.__metadata("design:paramtypes",[i.ApplicationRef,i.ComponentFactoryResolver,i.Injector,i.ElementRef])],s);function s(t,e,n,o){this.applicationRef=t,this.componentFactoryResolver=e,this.injector=n,this.container=o}e.PopupService=o},function(t,e){t.exports=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(11),s=n(7),a=n(2),n=n(10),s=[s.PopupComponent],n=o.__decorate([i.NgModule({declarations:[s],entryComponents:[s],exports:[s],imports:[r.CommonModule,a.ResizeSensorModule],providers:[n.PopupService]})],function(){});e.PopupModule=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.packageMetadata={name:"@progress/kendo-angular-popup",productName:"Kendo UI for Angular",productCodes:["KENDOUIANGULAR","KENDOUICOMPLETE"],publishDate:1608131941,version:"",licensingDocsUrl:"https://www.telerik.com/kendo-angular-ui/my-license/?utm_medium=product&utm_source=kendoangular&utm_campaign=kendo-ui-angular-purchase-license-keys-warning"}},function(t,e){t.exports=u},function(t,e){t.exports=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=n(0),i=n(15),s={expand:function(t){var e="up"===t||"down"===t?"scaleY":"scaleX";return{start:{transform:e+"(0)",transformOrigin:"down"===t?"top":"left"===t?"right":"right"===t?"left":"bottom"},end:{transform:e+"(1)"}}},slide:function(t){var e="left"===t||"right"===t?"translateX":"translateY";return{start:{transform:e+"("+("right"===t||"down"===t?-100:100)+"%)"},end:{transform:e+"(0%)"}}},fade:function(){return{start:{opacity:0},end:{opacity:1}}},zoom:function(){return{start:{transform:"scale(0)"},end:{transform:"scale(1)"}}}},o=(a.prototype.play=function(t,e,n){if(!this.flip||this.flip.horizontal!==n.horizontal||this.flip.vertical!==n.vertical){this.flip=n;var o=e.type||"slide",i=s[o];if(i){n=i(this.getDirection(n,e));this.playStates(t,n,e)}else if(r.isDevMode())throw new Error('Unsupported animation type: "'+o+'". The supported types are slide, expand, fade and zoom.')}},a.prototype.ngOnDestroy=function(){this.stopPlayer()},a.prototype.playStates=function(t,e,n){var o=this;this.stopPlayer();n=n.duration||100,e=this.animationBuilder.build([i.style(e.start),i.animate(n+"ms ease-in",i.style(e.end))]),t=this.player=e.create(t);t.onDone(function(){o.end.emit(),o.stopPlayer()}),this.start.emit(),t.play()},a.prototype.getDirection=function(t,e){e=e.direction||"down";return t.horizontal&&("left"===e?e="right":"right"===e&&(e="left")),t.vertical&&("down"===e?e="up":"up"===e&&(e="down")),e},a.prototype.stopPlayer=function(){this.player&&(this.player.destroy(),this.player=null)},o.__decorate([r.Injectable(),o.__metadata("design:paramtypes",[i.AnimationBuilder])],a));function a(t){this.animationBuilder=t,this.start=new r.EventEmitter,this.end=new r.EventEmitter}e.AnimationService=o},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e(1),i=e(0),p=e(5),c=e(8),l=e(2),r=e(4),u=e(3);n.THRESHOLD_DIFF=1;s.prototype.forElement=function(t){return this.unsubscribe(),this.element=t,this},s.prototype.subscribe=function(i){var r,s,a=this;i&&l.isDocumentAvailable()&&this.element&&(r=this._dom.nativeElement(this.element),s=this._dom.scrollableParents(this.element),this._zone.runOutsideAngular(function(){var t=s.map(function(t){return p.fromEvent(t,"scroll").pipe(c.auditTime(u.FRAME_DURATION))});a.subscription=p.merge.apply(void 0,t).subscribe(function(t){var e=t.target,n=0<s.filter(function(t){return t===e}).length,o=e===document,t=e===window;(n||o||t)&&i(a.isVisible(r,e))})}))},s.prototype.unsubscribe=function(){this.subscription&&this.subscription.unsubscribe()},s.prototype.isVisible=function(t,e){t=this._dom.boundingOffset(t),e=this._dom.boundingOffset(e);return!(n.THRESHOLD_DIFF<e.top-t.bottom||n.THRESHOLD_DIFF<t.top-e.bottom||n.THRESHOLD_DIFF<t.left-e.right||n.THRESHOLD_DIFF<e.left-t.right)},i=o.__decorate([i.Injectable(),o.__metadata("design:paramtypes",[r.DOMService,i.NgZone])],s);function s(t,e){this._dom=t,this._zone=e}n.ScrollableService=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(5),s=n(8),a=n(2),p=n(3),n=n(4),i=(c.prototype.subscribe=function(t){var e=this;a.isDocumentAvailable()&&this._zone.runOutsideAngular(function(){e.subscription=r.fromEvent(e._dom.getWindow(),"resize").pipe(s.auditTime(p.FRAME_DURATION)).subscribe(function(){return t()})})},c.prototype.unsubscribe=function(){this.subscription&&this.subscription.unsubscribe()},c.prototype.isUnsubscribed=function(){return this.subscription&&this.subscription.closed},o.__decorate([i.Injectable(),o.__metadata("design:paramtypes",[n.DOMService,i.NgZone])],c));function c(t,e){this._dom=t,this._zone=e}e.ResizeService=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(4),u=n(3),n=n(6),r=(s.prototype.positionElement=function(t){var e=t.anchor,n=t.currentLocation,o=t.element,i=t.anchorAlign,r=t.elementAlign,s=t.collisions,a=t.margin,p=this._dom,c=this.scale||1,l=p.offsetAtPoint(o,n),l=u.scaleRect(l,c),e=u.scaleRect(p.offset(e),c),e=u.eitherRect(e,n),o=t.viewPort||p.windowViewPort(o);o.width=o.width/c,o.height=o.height/c;o=p.restrictToView({anchorAlign:i,anchorRect:e,collisions:s,elementAlign:r,elementRect:l,margin:a,viewPort:o}),n=p.addOffset(n,o.offset);return{flip:o.flip,flipped:o.flipped,offset:n}},o.__decorate([i.Injectable(),o.__param(1,i.Inject(n.SCALE)),o.__param(1,i.Optional()),o.__metadata("design:paramtypes",[r.DOMService,Number])],s));function s(t,e){void 0===e&&(e=1),this._dom=t,this.scale=e}e.PositionService=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(4),p=n(3),n=n(6),r=(s.prototype.alignElement=function(t){var e=t.anchor,n=t.element,o=t.anchorAlign,i=t.elementAlign,r=t.margin,s=t.offset,a=t.positionMode,t=this.scale||1,s="fixed"!==a&&this._dom.hasOffsetParent(n)?this.relativeRect(e,n,s,t):this.absoluteRect(e,n,s,t),t=p.scaleRect(this._dom.offset(n),t);return this._dom.align({anchorAlign:o,anchorRect:s,elementAlign:i,elementRect:t,margin:r})},s.prototype.absoluteRect=function(t,e,n,o){var i=this.elementScrollPosition(t,e),r=p.eitherRect(this._dom.offset(t),n),t=2*o,n=this._dom.stackingElementScroll(e);1!==o&&n&&(n.x/=t,n.y/=t);e=this._dom.stackingElementOffset(e);return 1!==o&&e&&(e.left/=t,e.top/=t),this._dom.removeScroll(this._dom.addScroll(p.removeStackingOffset(p.scaleRect(r,o),e),n),i)},s.prototype.elementScrollPosition=function(t,e){return t?{x:0,y:0}:this._dom.scrollPosition(e)},s.prototype.relativeRect=function(t,e,n,o){n=p.eitherRect(this._dom.position(t,e,o),n);return p.scaleRect(n,o)},o.__decorate([i.Injectable(),o.__param(1,i.Inject(n.SCALE)),o.__param(1,i.Optional()),o.__metadata("design:paramtypes",[r.DOMService,Number])],s));function s(t,e){void 0===e&&(e=1),this._dom=t,this.scale=e}e.AlignService=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(10);e.PopupService=o.PopupService,e.POPUP_CONTAINER=o.POPUP_CONTAINER;o=n(7);e.PopupComponent=o.PopupComponent;o=n(12);e.PopupModule=o.PopupModule;n=n(6);e.SCALE=n.SCALE,function(t){for(var e in t)r(e,t[e])}(e)}],o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},o.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=21)}}});